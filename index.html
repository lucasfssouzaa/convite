<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Convite de Casamento</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
    /* VARI√ÅVEIS */
    :root{
        --azul-escuro:#37476B;
        --azul-claro:#A8B2CB;
        --dourado:#C49D4E;
        --cinza:#B9ABA0;
    }
    
    /* RESET */
    *{
        margin:0;
        padding:0;
        box-sizing:border-box;
        font-family:'Arial', sans-serif;
    }
    
    html{
        scroll-behavior:smooth;
    }
    
    body{
        color:var(--azul-escuro);
        background:linear-gradient(135deg, #eaeaea, #d6d6d6);
        overflow-x:hidden;
    }

    body.noScroll{
        overflow-y:hidden;
    }

    /* ================= MENU ================= */
    header{
        position:fixed;
        top:0;
        width:100%;
        background:white;
        box-shadow:0 2px 10px rgba(0,0,0,.1);
        z-index:1000;
    
        transform:translateY(0);
        opacity:1;
        pointer-events:auto;
        transition:transform .5s ease, opacity .5s ease;
    }
    
    header.hide-menu{
        transform:translateY(-100%);
        opacity:0;
        pointer-events:none;
    }
    
    nav{
        display:flex;
        justify-content:space-between;
        align-items:center;
        padding:15px 30px;
    }
    
    nav ul{
        display:flex;
        list-style:none;
        gap:20px;
    }
    
    nav a{
        text-decoration:none;
        color:var(--azul-escuro);
        font-weight:bold;
    }
    
    .menu-mobile{
        display:none;
        font-size:26px;
        cursor:pointer;
    }
    
    /* ================= MENU LATERAL ================= */
    .menu-lateral{
        position:fixed;
        top:0;
        right:-100%;
        width:250px;
        height:100%;
        background:white;
        box-shadow:-2px 0 10px rgba(0,0,0,.2);
        padding:30px;
        z-index:2000;
        transition:.3s;
    }
    
    .menu-lateral ul{
        list-style:none;
    }
    
    .menu-lateral li{
        margin:20px 0;
    }
    
    .menu-lateral a{
        text-decoration:none;
        color:var(--azul-escuro);
        font-size:18px;
    }
    
    /* ================= SE√á√ïES ================= */
    .section{
        padding:100px 20px;
        text-align:center;
    }
    
    .titulo{
        font-size:32px;
        margin-bottom:20px;
        color:var(--azul-escuro);
    }
    
    /* HOME */
    #home{
        background:url("fotos/bg_noivos.png") center/cover no-repeat;
        min-height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
        color:white;
        position:relative;
    }
    
    #home::before{
        content:"";
        position:absolute;
        inset:0;
        background:rgba(55,71,107,.6);
    }
    
    .home-content{
        position:relative;
        z-index:2;
    }
    
    .home-content h1{
        font-size:40px;
        margin-bottom:20px;
    }
    
    .home-content p{
        font-size:22px;
    }
    
    /* SAVE THE DATE */
    #save-date{
        background:var(--azul-claro);
    }
    
    #save-date h2{
        font-size:40px;
    }
    
    #cronometro{
        display:flex;
        justify-content:center;
        gap:20px;
        flex-wrap:wrap;
        margin-top:30px;
    }
    
    .tempo{
        background:white;
        padding:20px;
        border-radius:10px;
        min-width:90px;
        box-shadow:0 4px 10px rgba(0,0,0,.1);
    }
    
    .tempo span{
        font-size:28px;
        font-weight:bold;
    }
    
    /* NOIVOS */
    #noivos .fotos{
        display:flex;
        justify-content:center;
        gap:40px;
        margin-top:30px;
    }
    
    #noivos img{
        width:150px;
        height:150px;
        border-radius:50%;
        object-fit:cover;
        border:5px solid var(--dourado);
    }
    
    /* LOCAL */
    #local iframe{
        width:100%;
        max-width:600px;
        height:300px;
        border:0;
        border-radius:10px;
    }
    
    /* CONFIRMA√á√ÉO */
    #confirmar button{
        background:var(--azul-escuro);
        color:white;
        border:none;
        padding:15px 30px;
        font-size:18px;
        border-radius:8px;
        cursor:pointer;
    }
    
    #confirmar button:disabled{
        background:gray;
        cursor:not-allowed;
    }
    
    /* PRESENTES */
    #presentes{
        background:var(--azul-claro);
    }
    
    .pix{
        background:white;
        display:inline-block;
        padding:20px;
        border-radius:10px;
        margin-top:20px;
        font-size:18px;
        box-shadow:0 4px 10px rgba(0,0,0,.1);
    }
    
    /* ================= CONVITE / CARTA ================= */
    .tela{
        width:100vw;
        height:100vh;
        display:flex;
        align-items:center;
        justify-content:center;
    }
    
    .envelope{
        width:100%;
        height:100%;
        max-width:100vw;
        max-height:100vh;
        position:relative;
        cursor:pointer;
    }
    
    .base{
        position:fixed;
        inset:0;
        background:#1d2d52;
        z-index:1;
        height:120%;
    }
    
    .aba{
        position:absolute;
        top:0;
        left:0;
        width:100%;
        height:50%;
        background:#152448;
        clip-path:polygon(0 0, 100% 0, 50% 100%);
        transform-origin:top;
        transition:transform 1s ease;
        z-index:3;
    }
    
    .carta{
        position:absolute;
        bottom:-100%;
        left:2%;
        width:96%;
        height:85%;
        text-align:center;
        z-index:2;
        box-shadow:0 10px 30px rgba(0,0,0,.2);
    
        opacity:0;
        pointer-events:none;
    
        transition:
            bottom 1s ease .3s,
            opacity .6s ease .4s;
    }
    
    .carta h1{
        font-size:clamp(1.6rem, 4vw, 2.2rem);
        margin-bottom:16px;
    }
    
    .carta p{
        font-size:1rem;
        line-height:1.6;
    }

    .conteudo-carta{
        width: 100%;
        padding: 24px;
        border-radius: 8px;
        background-color: white;
    }
    
    .envelope.aberto .aba{
        transform:rotateX(180deg);
    }
    
    .envelope.aberto .carta{
        bottom:5%;
        opacity:1;
        pointer-events:auto;
    }

    #selo{
        z-index:10;
        position:absolute;
        top:50%;
        left:50%;
        transform:translate(-50%, -50%);
        border-radius:50%;
        padding:5px;
        background:white;
        width:120px;
        height:120px;
        align-items:center;
        justify-content:center;
        display:flex;
        border: 5px solid var(--azul-escuro);
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    #selo img{
        width:100%;
        object-fit:contain;
    }

    #abrirConvite {
        position: absolute;
        bottom: 40px;
        left: 50%;
        transform: translateX(-50%);
        color: #ffffff;
        font-size: 1.1rem;
        letter-spacing: 1px;
        text-align: center;
        opacity: 0.9;
        animation: pulseConvite 2s ease-in-out infinite;
        text-shadow: 0 2px 4px rgba(0,0,0,0.35);
        pointer-events: none;
        transition: opacity 0.5s ease, transform 0.5s ease;
        z-index:10;
    }

    @keyframes pulseConvite {
        0% {
            transform: translateX(-50%) scale(1);
            opacity: 0.7;
        }
        50% {
            transform: translateX(-50%) scale(1.08);
            opacity: 1;
        }
        100% {
            transform: translateX(-50%) scale(1);
            opacity: 0.7;
        }
    }

    
    /* ================= RESPONSIVO ================= */
    @media (orientation: landscape){
        .carta{
            height:80%;
        }
    }
    
    @media(max-width:768px){
        #abrirConvite{
            bottom: 100px;
        }

        nav ul{
            display:none;
        }
    
        .menu-mobile{
            display:block;
        }

        #save-date h2{
            font-size:24px;
        }

        .tempo{
            padding:10px;
            min-width: 70px;
        }

        .tempo span{
            font-size:20px;
        }

        #selo {
            top: 30%;
        }

        .aba {
            height: 30%;
        }
    }
</style>
    
</head>

<body class="noScroll">

<header id="menu" class="menu hide-menu">
<nav>
    <!-- Logo -->
    <img src="fotos/Logo_letras.png" alt="Logo" width="100" style="margin: -5px;">
    <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#save-date">Data do Casamento</a></li>
        <li><a href="#noivos">Noivos</a></li>
        <li><a href="#dressCode">Dress Code</a></li>
        <li><a href="#local">Local</a></li>
        <li><a href="#confirmar">Confirmar Presen√ßa</a></li>
        <li><a href="#presentes">Presentes</a></li>
    </ul>
    <div class="menu-mobile" onclick="toggleMenu()">‚ò∞</div>
</nav>
</header>

<div id="bg-menuLateral" onClick="toggleMenu()" style="width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); position: fixed; top: 0; left: 0; z-index: 20; display: none;"></div>
<div class="menu-lateral hide-menu menu" id="menuLateral" style="z-index: 21;">
<ul>
    <li><a onclick="toggleMenu()" href="#home">Home</a></li>
    <li><a onclick="toggleMenu()" href="#save-date">Data do Casamento</a></li>
    <li><a onclick="toggleMenu()" href="#noivos">Noivos</a></li>
    <li><a onclick="toggleMenu()" href="#dressCode">Dress Code</a></li>
    <li><a onclick="toggleMenu()" href="#local">Local</a></li>
    <li><a onclick="toggleMenu()" href="#confirmar">Confirmar Presen√ßa</a></li>
    <li><a onclick="toggleMenu()" href="#presentes">Presentes</a></li>
</ul>
</div>


<div class="tela">
    <div class="envelope" id="envelope" onClick="abrirConvite()">
        <div class="aba"></div>
        <div class="base"></div>
        <!-- Conteudo da frente do convite -->
        <div class="conteudo-frente" style="width: 100%; height: 100%;">
            <div id="selo">
                <!-- <img src="fotos/Logo_letras.png" alt="Logo"> -->
                <img src="fotos/Logo_basica.png" alt="Logo">
            </div>
            <h1 id="abrirConvite">ABRIR CONVITE</h1>
            
        </div>

        <div class="carta">
            <div class="conteudo-carta">                    
                <div class="section" id="home">
                    <div class="home-content">
                        <h1 id="nomeConvidado">Carregando...</h1>
                        <p id="info"></p>
                    </div>
                </div>

                <div class="section" id="apresentacao">
                    <h2 class="titulo">Apresentacao</h2>
                    <p>Aqui vai uma apresentacao sobre o convite, a festa</p>
                </div>
                
                <div class="section" id="save-date">
                    <h2 class="titulo">Save the Date</h2>
                    <h2>üìÖ 14 de Novembro de 2026</h2>
                    <p>√Äs 12:00</p>
                </div>
                
                <div class="section" id="contador">
                    <h2 class="titulo">Contagem Regressiva</h2>
                    <div id="cronometro">
                        <div class="tempo"><span id="dias">0</span><br>Dias</div>
                        <div class="tempo"><span id="horas">0</span><br>Horas</div>
                        <div class="tempo"><span id="minutos">0</span><br>Min</div>
                        <div class="tempo"><span id="segundos">0</span><br>Seg</div>
                    </div>
                </div>
                
                <div class="section" id="noivos">
                    <h2 class="titulo">Sobre os Noivos</h2>
                    <p>Uma hist√≥ria constru√≠da com amor, parceria e muitos sonhos.</p>
                    <div class="fotos">
                        <img src="fotos/lucas.png">
                        <img src="fotos/dayane.png">
                    </div>
                </div>

                <div class="section" id="dressCode">
                    <h2 class="titulo">Dress Code</h2>
                    <p>Casual</p>
                </div>
                
                <div class="section" id="local">
                    <h2 class="titulo">Local</h2>
                    <p>Ch√°cara Betel - Ribeir√£o Pires</p>
                    <br>
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d233962.71098633212!2d-46.7382115816492!3d-23.61625985061271!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce73a975b11369%3A0x4f09e82194583788!2sCh%C3%A1cara%20Betel%20-%20Ribeir%C3%A3o%20Pires!5e0!3m2!1spt-BR!2sbr!4v1769044670654!5m2!1spt-BR!2sbr" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                </div>
                
                <div class="section" id="confirmar">
                    <h2 class="titulo">Confirme sua Presen√ßa</h2>
                    <button id="btnConfirmar">Confirmar presen√ßa</button>
                </div>
                
                <div class="section" id="presentes">
                    <h2 class="titulo">Presentes</h2>
                    <p>Se quiser nos presentear em dinheiro:</p>
                    <div class="pix">PIX: seu-pix-aqui</div>

                    <h2 class="titulo">Sugest√µes de Presentes</h2>
                    <p>Se quiser nos presentear com algo, aqui est√£o algumas sugest√µes:</p>
                </div>
                
            </div>
        </div>
    </div>
</div>

<script>

window.addEventListener("load", () => {
    window.scrollTo(0, 0);
});

function abrirConvite(){
    const logoFrente = document.getElementById("selo");
    const abrirConvite = document.getElementById("abrirConvite");
    abrirConvite.style.display = "none";

    // some suavemente o selo
    logoFrente.style.transition = "opacity 0.5s ease";
    logoFrente.style.opacity = "0";
    logoFrente.style.pointerEvents = "none";
    
    setTimeout(() => {
        
        envelope.classList.add("aberto");
        setTimeout(() => {
            document.getElementById("menu").classList.remove("hide-menu");
            document.getElementById("menuLateral").classList.remove("hide-menu");
        }, 1000);
    }, 500);
    document.body.classList.remove("noScroll");
};

function toggleMenu(){
    const menu = document.getElementById("menuLateral");
    const bgMenuLateral = document.getElementById("bg-menuLateral");

    console.log('posicao do menu: ', menu.style.right);

    if(menu.style.right === "0px"){
        bgMenuLateral.style.display = "none";
        menu.style.right = "-100%";
    } else {
        bgMenuLateral.style.display = "block";
        menu.style.right = "0px";
    }
}

/* CONTADOR */
const dataEvento = new Date("2026-06-15T12:00:00");

setInterval(()=>{
    const agora = new Date();
    const diff = dataEvento - agora;

    if(diff <= 0) return;

    document.getElementById("dias").innerText = Math.floor(diff / (1000*60*60*24));
    document.getElementById("horas").innerText = Math.floor(diff / (1000*60*60) % 24);
    document.getElementById("minutos").innerText = Math.floor(diff / (1000*60) % 60);
    document.getElementById("segundos").innerText = Math.floor(diff / 1000 % 60);
},1000);

const SUPABASE_URL = "https://mtwabudrvpdkmayuqfsb.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im10d2FidWRydnBka21heXVxZnNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkwMjA4NTYsImV4cCI6MjA4NDU5Njg1Nn0.Mao-afziGNwwtIRR_gYQ2HvmVYa0VT9luutZE2P41kM";

    const supabaseClient = supabase.createClient(
        SUPABASE_URL,
        SUPABASE_ANON_KEY
    );

    const params = new URLSearchParams(window.location.search);
    const convidadoId = params.get("c");
    console.log('id: ', convidadoId);

    const nomeEl = document.getElementById("nomeConvidado");
    const infoEl = document.getElementById("info");
    const btnConfirmar = document.getElementById("btnConfirmar");

    if (!convidadoId) {
        nomeEl.innerText = "Convite inv√°lido";
        btnConfirmar.disabled = true;
        throw new Error("ID n√£o informado");
    }

    async function carregarConvidado() {
        const { data, error } = await supabaseClient
            .from("convidados")
            .select("*")
            .eq("id", convidadoId)
            .single();

        if (error || !data) {
            nomeEl.innerText = "Convidado n√£o encontrado";
            btnConfirmar.disabled = true;
            return;
        }

        nomeEl.innerText = `Ol√°, ${data.nome}`;
        if(data.qtdAdultos + data.qtdCriancas > 1){
            infoEl.innerText = `Voc√™s est√£o sendo convidados para o nosso casamento`;
        } else {
            infoEl.innerText = `Voc√™ est√° sendo convidado para o nosso casamento`;
        }

        if (data.confirmacao) {
            btnConfirmar.innerText = "Presen√ßa j√° confirmada";
            btnConfirmar.disabled = true;
        }
    }

    async function confirmarPresenca() {
        btnConfirmar.disabled = true;

        const { error } = await supabaseClient
            .from("convidados")
            .update({
                confirmacao: true,
                dataConfirmacao: agoraEmIsoLocal()
            })
            .eq("id", convidadoId);

        if (error) {
            alert("Erro ao confirmar presen√ßa");
            btnConfirmar.disabled = false;
            return;
        }

        btnConfirmar.innerText = "Presen√ßa confirmada com sucesso";
    }

    btnConfirmar.addEventListener("click", confirmarPresenca);

    carregarConvidado();

    function agoraEmIsoLocal() {
        const agora = new Date();
        const offsetMs = agora.getTimezoneOffset() * 60000;
        return new Date(agora.getTime() - offsetMs).toISOString();
    }
</script>

</body>
</html>
